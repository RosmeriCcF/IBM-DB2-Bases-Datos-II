--Tener en cuenta que si el nombre del SCHEMA se ha cambiado, entonces también se debe cambiar en estas sentencias.
CREATE TABLE SCHEMA_TIENDA.TBL_USUARIOS (
    ID_USUARIO INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 20
    ),
    NOMBRES VARCHAR(40) NOT NULL,
    APELLIDO_PATERNO VARCHAR(40) NOT NULL,
    APELLIDO_MATERNO VARCHAR(40) NOT NULL,
    NOMBRE_COMPLETO VARCHAR(120),
    DNI CHAR(8) NOT NULL,
    SEXO CHAR(1) NOT NULL,
    TELEFONO NUMERIC(9, 0),
    FECHA_REGISTRO TIMESTAMP WITH DEFAULT CURRENT_TIMESTAMP,
    USUARIO_REGISTRO INTEGER,
    CONSTRAINT PK_TBL_USUARIOS PRIMARY KEY (ID_USUARIO)
);
CREATE TABLE SCHEMA_TIENDA.TBL_COLABORADORES (
    ID_USUARIO INTEGER NOT NULL,
    ID_CARGO SMALLINT NOT NULL,
    ID_TURNO INTEGER NOT NULL,
    CODIGO_COLABORADOR INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 10000 MAXVALUE 2147483647 CACHE 20
    ),
    FECHA_INGRESO TIMESTAMP,
    FLAG_ACTIVIDAD NUMERIC(1, 0) NOT NULL WITH DEFAULT 1,
    FLAG_IS_SUPERVISOR NUMERIC(1, 0) NOT NULL WITH DEFAULT 0,
    CONSTRAINT PK_TBL_COLABORADORES PRIMARY KEY (ID_USUARIO)
);
CREATE TABLE SCHEMA_TIENDA.TBL_TURNOS (
    ID_TURNO SMALLINT NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 32767 CACHE 20
    ),
    DESCRIPCION VARCHAR(20) NOT NULL,
    HORA_INICIO TIME NOT NULL,
    HORA_FIN TIME NOT NULL,
    CONSTRAINT PK_TBL_TURNOS PRIMARY KEY (ID_TURNO)
);
CREATE TABLE SCHEMA_TIENDA.TBL_CARGOS (
    ID_CARGO SMALLINT NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 32767 CACHE 20
    ),
    DESCRIPCION VARCHAR(20) NOT NULL,
    REMUNERACION NUMERIC(10, 2) NOT NULL WITH DEFAULT 0.00,
    ID_DEPARTAMENTO SMALLINT NOT NULL,
    FLAG_ACTIVIDAD NUMERIC(1, 0) NOT NULL WITH DEFAULT 1,
    CONSTRAINT PK_TBL_CARGOS PRIMARY KEY (ID_CARGO)
);
CREATE TABLE SCHEMA_TIENDA.TBL_DEPARTAMENTOS (
    ID_DEPARTAMENTO SMALLINT NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 32767 CACHE 20
    ),
    DESCRIPCION VARCHAR(25) NOT NULL,
    ID_SUPERVISOR INTEGER,
    CONSTRAINT PK_TBL_DEPARTAMENTOS PRIMARY KEY (ID_DEPARTAMENTO)
);
CREATE TABLE SCHEMA_TIENDA.TBL_CUENTAS (
    ID_CUENTA INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 20
    ),
    ID_USUARIO INTEGER NOT NULL,
    CUENTA VARCHAR(25) NOT NULL,
    CONTRASEÑA VARCHAR(25) NOT NULL,
    TIPO_CUENTA CHAR(1) NOT NULL WITH DEFAULT '0',
    FLAG_ACTIVIDAD NUMERIC(1, 0) NOT NULL WITH DEFAULT 1,
    FECHA_REGISTRO TIMESTAMP NOT NULL WITH DEFAULT CURRENT_TIMESTAMP,
    USUARIO_REGISTRO INTEGER NOT NULL,
    CONSTRAINT PK_TBL_CUENTAS PRIMARY KEY (ID_CUENTA)
);
CREATE TABLE SCHEMA_TIENDA.TBL_PRODUCTOS (
    ID_PRODUCTO INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 20
    ),
    NOMBRE VARCHAR(30) NOT NULL,
    DESCRIPCION VARCHAR(75),
    PRECIO NUMERIC(10, 2) NOT NULL WITH DEFAULT 0.00,
    STOCK SMALLINT NOT NULL WITH DEFAULT 0,
    ID_CATEGORIA SMALLINT NOT NULL,
    ID_PROVEEDOR INTEGER NOT NULL,
    CONSTRAINT PK_TBL_PRODUCTOS PRIMARY KEY (ID_PRODUCTO)
);
CREATE TABLE SCHEMA_TIENDA.TBL_CATEGORIAS (
    ID_CATEGORIA SMALLINT NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 32767 CACHE 20
    ),
    DESCRIPCION VARCHAR(25) NOT NULL,
    CONSTRAINT PK_TBL_CATEGORIAS PRIMARY KEY (ID_CATEGORIA)
);
CREATE TABLE SCHEMA_TIENDA.TBL_MOVIMIENTOS_MERCADERIA (
    ID_MOVIMIENTO INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 20
    ),
    ID_PRODUCTO INTEGER NOT NULL,
    FECHA TIMESTAMP NOT NULL,
    TIPO CHAR(1) NOT NULL,
    CANTIDAD SMALLINT NOT NULL,
    CONSTRAINT PK_TBL_MOVIMIENTOS_MERCADERIA PRIMARY KEY (ID_MOVIMIENTO)
);
CREATE TABLE SCHEMA_TIENDA.TBL_PROVEEDORES (
    ID_PROVEEDOR INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 20
    ),
    NOMBRE VARCHAR(25) NOT NULL,
    DIRECCION VARCHAR(50),
    TELEFONO NUMERIC(9, 0),
    CORREO VARCHAR(30),
    CONSTRAINT PK_TBL_PROVEEDORES PRIMARY KEY (ID_PROVEEDOR)
);
CREATE TABLE SCHEMA_TIENDA.TBL_CLIENTES (
    ID_USUARIO INTEGER NOT NULL,
    CODIGO_CLIENTE INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 10000 MAXVALUE 2147483647 CACHE 20
    ),
    FECHA_SUBSCRIPCION TIMESTAMP NOT NULL WITH DEFAULT CURRENT_TIMESTAMP,
    PUNTOS_ACUMULADOS INTEGER NOT NULL WITH DEFAULT 0,
    FLAG_ACTIVIDAD NUMERIC(1, 0) NOT NULL WITH DEFAULT 1,
    CONSTRAINT PK_TBL_CLIENTES PRIMARY KEY (ID_USUARIO)
);
CREATE TABLE SCHEMA_TIENDA.TBL_VENTAS (
    ID_VENTA INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 20
    ),
    FECHA TIMESTAMP NOT NULL WITH DEFAULT CURRENT_TIMESTAMP,
    ID_CLIENTE INTEGER NOT NULL,
    ID_COLABORADOR INTEGER NOT NULL,
    MEDIO_PAGO CHAR(1) NOT NULL WITH DEFAULT '0',
    SUBTOTAL NUMERIC(10, 2) NOT NULL,
    FLAG_DESCUENTO NUMERIC(1, 0) NOT NULL WITH DEFAULT 0,
    MONTO_DESCUENTO NUMERIC(10, 2) WITH DEFAULT 0.00,
    MONTO_IGV NUMERIC(10, 2) NOT NULL,
    PORCENTAJE_IGV NUMERIC(5, 4) NOT NULL,
    TOTAL NUMERIC(10, 2) NOT NULL,
    CONSTRAINT PK_TBL_VENTAS PRIMARY KEY (ID_VENTA)
);
CREATE TABLE SCHEMA_TIENDA.TBL_VENTAS_PRODUCTOS (
    ID_VENTA_PRODUCTO INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (
        START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 20
    ),
    ID_PRODUCTO INTEGER NOT NULL,
    ID_VENTA INTEGER NOT NULL,
    ID_MOVIMIENTO INTEGER NOT NULL,
    CANTIDAD NUMERIC(10, 2) NOT NULL,
    UM CHAR(3) NOT NULL,
    CONSTRAINT PK_TBL_VENTAS_PRODUCTOS PRIMARY KEY (ID_VENTA_PRODUCTO)
);
